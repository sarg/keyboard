* Parts

| Name                |   Qty | Price, $ |
|---------------------+-------+----------|
| Diodes 1n4148       |   100 |     0.78 |
| Keys Gateron Brown  |    50 |    21.00 |
| Keys Gateron Red    |    10 |          |
| Keys Gateron Other  |     5 |          |
| Keycaps PBT DSA     |    65 |    17.90 |
| Atmega32u4          |     1 |     2.88 |
| Atmega32u4          |     1 |     3.22 |
| Wires               | 1 set |      2.2 |
| 3.5mm plug          |     2 |      0.9 |
| 3.5mm cable         |     1 |     1.58 |
| encoder             |     5 |     1.78 |
| knob                |    10 |     1.40 |
| petg filament 1kg   |     1 |       30 |
| petg leftover       |       |     -24. |
| soldering paste     |     1 |     2.29 |
| soldering wire 100g |     1 |       11 |
| soldering wire left |       |      -10 |
|---------------------+-------+----------|
| tent screws         |     8 |          |
| plastidip           |     1 |          |
| tent fixing nuts    |     4 |          |
| tent nuts M5        |     4 |          |
|---------------------+-------+----------|
|                     |       |    62.93 |
#+TBLFM: @>$3=vsum(@I..@II)::$3=::@15$3=@14$3 * -0.8

* Layout
[[./layout_v1.jpg]]

- To find best layout for my hands I've put several stripes of masking tape glue side up on a sheet of paper.
- Then I've adjusted columns to my liking and measured the offsets.
- I have Gateron switches which are Cherry-MX compatible. So the hole size is 14x14 mm and distance between holes should be 5 mm.
- Thumb cluster is parameterized in polar coordinates.

* Case design
** v1
[[./cardboard_v1.jpg]]
** v2
[[./cardboard_v2.jpg]]

** manufacturing
I'm going to choose one of the options.
1. PCB only
   jlcpcb, x5 ~ 27$ + 11$ shipping
2. *3d printed*
3. laser cutted
   price estimation:
   - $5.14 x 2 + $9 (fixed, handling) = $19.28 (ponoko)
   - â‚¬8.20 x 2 + shipping (formulor.de), no 1.5mm material

3d printing it is. Next time I'll try PCBs. It seems that you can use PCB as top plate and the manufacturer could mill holes of any shape.
* 3d printing
https://thomasbaart.nl/2019/04/07/cheat-sheet-custom-keyboard-mounting-styles/

- [[https://all3dp.com/1/3d-printing-support-structures/][need of support structures for overhang]]
- tolerances for an easy assembly
- choosing proper thickness to ensure integrity

Requirements.
1. switch should be firmly attached to the keyboard
   switch is designed to be mounted on a panel 1.5 mm thick and soldered onto PCB
   you can select one of those options - pcb+panel, panel only, pcb only

   produces: mounting place

2. switch should be positioned under the finger and easily accessible without much finger movement
   there are few ergonomic layouts that minimize finger movement. Just take one and adapt it to your hands

   2.1 keycaps are wider than the switch body. there should be minimal distance between keycaps so that they don't touch
   ortholinear + thumb cluster shaped as an arc

   produces: layout

3. mounting plate should be sturdy enough to not bend when typing

   produces: plate thickness

4. switches should be wired to the controller
   pcb or handwiring. Both need some vertical space
   something that elevates the plate needs to be implemented:
   - pins
   - another plate

   produces: wiring space

5. controller should have some place

   produces: controller location

6. underside of the keyboard should be protected
   pcb or handwiring should be protected from water spills and mechanical damage

   produces: bottom plate

7. optional: halves of a split keyboard should communicate

   produces: cable between halves, connectors

9. optional: tilt/tent

   produces: tent brackets

from handbook of 3d printing
make wall thickness proportional to nozzle width
add fillets everywhere
<45 degree overhang doesn't require support

** first print
For first print I've prepare a single row of 5 keys where each hole has size $14+i*0.1, i in [-2..2]$. I've found 14-0.2 the best. Then I've prepared small test case where I've mounted all the different types of switches I have. I had to redesign promicro mount after the print as the board wasn't fitting nicely.

[[./test-print.jpg]]

* Hand-wiring
[[https://deskthority.net/viewtopic.php?f=7&t=6050&start=][BrownFox step by step - deskthority]]
